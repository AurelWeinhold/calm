---
# This playbook prepares the servers for the bootstrap


- name: Setup to bootstrap
  hosts: baremetal
  become: yes

  tasks:
      - name: Install apt dependencies
        apt:
            update_cache: yes
            pkg:
                - python3
                - python3-pip
                - python3-dev
                - libffi-dev
                - gcc
                - libssl-dev

      - name: Uninstall docker-py
        pip:
            name: docker-py
            state: absent
            state: latest

      - name: Install pip dependencies
        pip:
            name: docker
            state: latest
