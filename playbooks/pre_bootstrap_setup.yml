---
# This playbook prepares the servers for the bootstrap


- name: Setup to bootstrap
  hosts: compute
  become: yes

  tasks:
      - name: Install apt dependencies
        apt:
            update_cache: yes
            pkg:
                - python3
                - python3-pip
                - python3-dev
                - libffi-dev
                - gcc
                - libssl-dev

      - name: Uninstall docker-py
        pip:
            virtualenv: /home/calm/calmenv
            name: docker-py
            state: absent

      - name: Install pip dependencies
        pip:
            virtualenv: /home/calm/calmenv
            name: docker
